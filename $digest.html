<!DOCTYPE HTML>
<html ng-app="MyModule">
	<head>
		<meta charset="UTF-8" />
		<title>angularjs-$digest</title>
		<link href="css/bootstrap.min.css" rel="stylesheet" />
		<script type="text/javascript" src="freamwork/angular-1.3.0.js"></script>
		<script type="text/javascript" src="freamwork/angular/angular-animate.min.js"></script>
		<script type="text/javascript" src="js/controler.js"></script>
		<style type="text/css">
		</style>
	</head>
	<body>
		<div ng-controller="digestCtrl">
			<p>{{message1}}</p>
			<p>{{message2}}</p>
		</div>
			
		


	<script type="text/javascript">
		/*
			$watch : 检测特定值的改变 

			$digest : 只会检测自己的scope

			$apply : 不仅检测自己的scope也会检测rootScope 
		*/

		var myModule = angular.module('MyModule', []);

		myModule.controller('digestCtrl', ['$scope', '$rootScope', '$timeout', function ($scope, $rootScope, $timeout){
			$rootScope.message1 = 'initial rootScope';
			$scope.message2 = 'initial scope';

			$timeout(function (){
				console.log('expired');
				$rootScope.message1 = 'new initial rootScope';
				$scope.message2 = 'new initial scope';
			}, 2000);

		}]);




	</script>
	</body>
</html>