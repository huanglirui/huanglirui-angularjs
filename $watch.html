<!DOCTYPE HTML>
<html ng-app="MyModule">
	<head>
		<meta charset="UTF-8" />
		<title>angularjs-$watch</title>
		<link href="css/bootstrap.min.css" rel="stylesheet" />
		<script type="text/javascript" src="freamwork/angular-1.3.0.js"></script>
		<script type="text/javascript" src="freamwork/angular/angular-animate.min.js"></script>
		<script type="text/javascript" src="js/controler.js"></script>
		<style type="text/css">
		</style>
	</head>
	<body>
		<div ng-controller="wacthCtrl">
			<table class="table table-striped">
 				<thead>
 					<tr>
 						<th>姓名</th>
 						<th>年龄</th>
 						<th>薪资</th>
 						<th>删除</th>
 					</tr>
 				</thead>
 				<tbody>
 					<tr ng-repeat="people in person">
 						<td>{{people.name}}</td>
 						<td>{{people.age}}</td>
 						<td>{{people.salary | currency}}</td>
 						<td><button class="btn btn-primary" ng-click="del($index)">delete</button></td>
 					</tr>

 				</tbody>
			</table>

		

			<div class="container">
				<select ng-model="number" ng-options="n for n in [0,1,2,3]"></select>
			</div>
			<p>{{number}}</p>
			<p>{{time}}</p>
		</div>
			
				


	<script type="text/javascript">
		
	var myModule = angular.module('MyModule', []);

	myModule.controller('wacthCtrl', ['$scope', function ($scope){
		$scope.number = 3;
		$scope.person = [
			{name: 'huanglirui', age: 22, salary: 2000},
			{name: 'zhongwenhao', age: 21, salary: 3000},
			{name: 'heyuanfei', age: 23, salary: 4000}
		];

		$scope.del = function (index){
			$scope.person.splice(index, 1);
		};

		$scope.time = Date().toString();

		$scope.$watch('number', function (newValue, oldValue){
			$scope.person.length = newValue;
			if (newValue != oldValue){
				$scope.time = Date().toString();
				console.log(newValue);
			}
		}, true);

	}]);

	</script>
	</body>
</html>